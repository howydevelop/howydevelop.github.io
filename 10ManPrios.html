<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Permissions-Policy" content="interest-cohort=()">
    <meta charset = "UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content = "width=device-width",
    inital-scale="1.0">
    <title>Druckwelle</title>
    <link rel="stylesheet" href="priosStyle.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>

<body>
    <div class = wrapper>
        <h2>Druckwelle</h2>
        <h1 id="raidPinDisplay">Raid: </h1>
        <table>
            <tr>
                <th>Fixate</th>
                <th style="padding: 0px 150px 0px 0px; ;" >Username</th>
                <th style="padding: 0px 100px 0px 0px; ;" >Class</th>
                <th style="padding: 0px 150px 0px 0px; ;" >Prio 1</th>
                <th style="padding: 0px 150px 0px 0px; ;" >Prio 2</th>
                <th style="padding: 0px 150px 0px 0px; ;" >Prio 3</th>
            </tr>
            <tr>
                <th><button style="scale: 150%;resize: auto;">Fixed</button></th>
                <td >username1</td>
                <td>class1</td>
                <td id = "prio1">item</td>
                <td>item</td>
                <td>item</td>
            </tr>
            <tr>
                <th><button style="scale: 150%;">Fixed</button></th>
                <td>username2</td>
                <td>class2</td>
                <td>item</td>
                <td>item</td>
                <td>item</td>
            </tr>
            <tr>
                <th><button style="scale: 150%;">Fixed</button></th>
                <td>username3</td>
                <td>class3</td>
                <td>item</td>
                <td>item</td>
                <td>item</td>
            </tr>
            <tr>
                <th><button style="scale: 150%;">Fixed</button></th>
                <td>username4</td>
                <td>class4</td>
                <td>item</td>
                <td>item</td>
                <td>item</td>
            </tr>
            <tr>
                <th><button style="scale: 150%;">Fixed</button></th>
                <td>username5</td>
                <td>class5</td>
                <td>item</td>
                <td>item</td>
                <td>item</td>
            </tr>
            <tr>
                <th><button style="scale: 150%;">Fixed</button></th>
                <td>username6</td>
                <td>class6</td>
                <td>item</td>
                <td>item</td>
                <td>item</td>
            </tr>
            <tr>
                <th><button style="scale: 150%;">Fixed</button></th>
                <td>username7</td>
                <td>class7</td>
                <td>item</td>
                <td>item</td>
                <td>item</td>
            </tr>
            <tr>
                <th><button style="scale: 150%;">Fixed</button></th>
                <td>username8</td>
                <td>class8</td>
                <td>item</td>
                <td>item</td>
                <td>item</td>
            </tr>
            <tr>
                <th><button style="scale: 150%;">Fixed</button></th>
                <td>username9</td>
                <td>class9</td>
                <td>item</td>
                <td>item</td>
                <td>item</td>
            </tr>
            <tr>
                <th><button style="scale: 150%;">Fixed</button></th>
                <td>username10</td>
                <td>class10</td>
                <td>item</td>
                <td>item</td>
                <td>item</td>
            </tr>
          </table>
    </div>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
        import {  getDatabase, ref, onValue,set, get, child } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBpqgEi1rRjjz-JKJGScvBJw1BYG7Wp-Ss",
            authDomain: "auth-e6c3e.firebaseapp.com",
            databaseURL: "https://auth-e6c3e-default-rtdb.firebaseio.com",
            projectId: "auth-e6c3e",
            storageBucket: "auth-e6c3e.appspot.com",
            messagingSenderId: "779843063671",
            appId: "1:779843063671:web:251ff503bf6cab66ffdb72"
        };
        const app = initializeApp(firebaseConfig);
        const db = getDatabase();
        const raidPin = localStorage.getItem('raidPin'); 

         //getting LeaderPin from firebase
        const leaderPinRef = ref(db, 'raids/raid: ' + raidPin+'/players/player: miki');
        
        function getAllData(){
            onValue(leaderPinRef, (snapshot) => {
            const data = snapshot.val();
            
            console.log(data);
            document.getElementById("prio1").innerHTML = data['prio1'];
            
            
        });
        }
      
        window.onload = getAllData;
        //writing Username and Class to firebase
        function writeUserData(username,playerClass,) 
        {
            const db = getDatabase();
            set(ref(db, 'raids/raid: ' + raidPin+'/players/player: ' + username), 
            {
                playerClass: playerClass,
                prio1: "text",
                prio2: 2,
                prio3: 3
            
            });
        }

        var text = document.getElementById('raidPinDisplay');
        
        text.innerHTML = "Raid Pin: " +raidPin;



    </script>
</body>

</html>